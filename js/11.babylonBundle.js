"use strict";(self.webpackChunktrans_america=self.webpackChunktrans_america||[]).push([[11,938],{7938:(e,t,s)=>{s.r(t),s.d(t,{Boxes:()=>c});var a=s(517),o=s(9529),i=s(2404),r=s(5714),n=s(3077);const h=s.p+"03713868bab7dd2e96995060bf2ae0f5.png";class c{constructor(e){this.scene=e,this.blueMaterial=new a.F("BlueMaterial",e),this.blueMaterial.diffuseColor=new o.v9(.5,.4,.8),this.blueMaterial.emissiveColor=new o.v9(.5,.4,.8),this.concreteMaterial=new a.F("concrete material",e),this.concreteMaterial.diffuseTexture=new n.g(h,e)}baseBoxes(){this.createBox(new o.Pq(4,1,12),new o.Pq(0,0,25),new o.Pq(-Math.PI/8,0,0),0),this.createBox(new o.Pq(4,1,12),new o.Pq(25,0,0),new o.Pq(-Math.PI/8,Math.PI/2,0),0),this.createBox(new o.Pq(4,1,12),new o.Pq(0,0,-25),new o.Pq(Math.PI/8,0,0),0),this.createBox(new o.Pq(4,1,12),new o.Pq(-25,0,0),new o.Pq(Math.PI/8,Math.PI/2,0),0)}randomBoxes(){const e=new o.Pq,t=new o.Pq,s=new o.Pq;for(let a=0;a<20;a++){const a=300*Math.random()-150+5,o=300*Math.random()-150+5,i=10*Math.random();e.set(i,i,i),t.set(o,0,a),s.set(a,a,a),this.createBox(e,t,s,0)}for(let a=0;a<30;a++){const a=300*Math.random()-150+5,o=300*Math.random()-150+5,i=3*Math.random();e.set(i,i,i),t.set(o,0,a),s.set(a,a,a),this.createBox(e,t,s,5)}}createBox(e,t,s,a){const o=i.P.CreateBox("box",{width:e.x,depth:e.z,height:e.y},this.scene);return o.position.set(t.x,t.y,t.z),o.rotation.set(s.x,s.y,s.z),a?(o.position.y+=5,o.material=this.blueMaterial):(a=0,o.material=this.concreteMaterial),o.physicsImpostor=new r.j(o,r.j.BoxImpostor,{mass:a,friction:.5,restitution:.7},this.scene),o}cellBoxes(e,t){const s=e/2,a=new o.Pq,i=new o.Pq,r=new o.Pq;for(let o=0;o<20;o++){const o=Math.random()*e-s,n=Math.random()*e-s,h=10*Math.random();a.set(h,h,h),i.set(n,0,o),r.set(o,o,o),this.createBox(a,i,r,0).parent=t}}createCellBox(e,t,s,a){const o=i.P.CreateBox("box",{width:e.x,depth:e.z,height:e.y});return o.position.set(t.x,t.y,t.z),o.rotation.set(s.x,s.y,s.z),a?(o.position.y+=5,o.material=this.blueMaterial):(a=0,o.material=this.concreteMaterial),o.physicsImpostor=new r.j(o,r.j.BoxImpostor,{mass:a,friction:.5,restitution:.7},this.scene),o}}},11:(e,t,s)=>{s.r(t),s.d(t,{DEFAULT_CELL_SIZE:()=>d,WorldMap:()=>w});var a=s(2971),o=s(2404),i=s(5714);const r=s.p+"c8f55e9ef9e4d3c0a223a3adaad7ad23.jpg";var n=s(3077),h=s(517),c=s(7938),l=s(9529);const d=100;class w{constructor(e){this.cells=new Map,this.scene=e,this.material=new h.F("ground material",e);const t=new n.g(r,e);this.material.diffuseTexture=t,t.uScale=10,t.vScale=10,e.fogMode=a.Z.FOGMODE_LINEAR,e.fogStart=20,e.fogEnd=120,e.fogColor=new l.v9(.9,.9,.85),e.fogDensity=.03,e.clearColor=new l.ov(.9,.9,.85,1),this.debugMaterial=new h.F("BlueMaterial",e),this.debugMaterial.diffuseColor=new l.v9(.5,.4,.8),this.debugMaterial.emissiveColor=new l.v9(.5,.4,.8)}update(e,t){const s=[[e+1,t+1],[e+1,t],[e+1,t-1],[e,t+1],[e,t],[e,t-1],[e-1,t+1],[e-1,t],[e-1,t-1]];for(const e of s){const t=e[0],s=e[1];if(!this.cells.has(`${t},${s}`)){const e=this.createCell(this.scene,t,s);return this.cells.set(`${t},${s}`,e),console.log(`Created cell ${t},${s}`),!1}}for(const s of this.cells.keys()){const[a,o]=s.split(","),i=parseInt(a),r=parseInt(o);if(i<e-1||i>e+1||r<t-1||r>t+1){const e=this.cells.get(s);e&&(this.scene.removeMesh(e),e.dispose(),this.cells.delete(s))}}return!0}createCell(e,t,s){const a=o.P.CreateGround("ground",{width:d,height:d,subdivisions:2},e);a.position.set(t*d,0,s*d),a.physicsImpostor=new i.j(a,i.j.BoxImpostor,{mass:0,friction:.5,restitution:.7},e);const r=d/2,n=o.P.CreateBox("box",{width:1,depth:1,height:4},this.scene);n.material=this.debugMaterial,a.addChild(n);const h=o.P.CreateBox("box",{width:1,depth:1,height:8},this.scene);h.material=this.debugMaterial,h.position.set(t*d+r,4,s*d+r),a.addChild(h);const l=o.P.CreateBox("box",{width:1,depth:1,height:8},this.scene);return l.material=this.debugMaterial,l.position.set(t*d-r,4,s*d-r),a.addChild(l),new c.Boxes(this.scene).cellBoxes(d,a),a.material=this.material,a}async getData(){try{let e=await fetch("world/0,0.txt"),t=await e.text();return console.log(t),t}catch(e){return console.error(e),""}}getDistrict(e,t){return this.getData().then((e=>{console.log("> "+e)})),0==e&&0==t?"Origin":e>3||t>3||e<-3||t<-3?"You are lost!":"Somewhere"}}}}]);
//# sourceMappingURL=11.babylonBundle.js.map