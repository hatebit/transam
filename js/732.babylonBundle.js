"use strict";(self.webpackChunkpro_racer=self.webpackChunkpro_racer||[]).push([[732,118],{7118:(e,t,s)=>{s.r(t),s.d(t,{Boxes:()=>h});var o=s(3242),a=s(7417),i=s(9823),n=s(9635),r=s(4684);const c=s.p+"03713868bab7dd2e96995060bf2ae0f5.png";class h{constructor(e){this.scene=e,this.blueMaterial=new o.K("BlueMaterial",e),this.blueMaterial.diffuseColor=new a.Wo(.5,.4,.8),this.blueMaterial.emissiveColor=new a.Wo(.5,.4,.8),this.concreteMaterial=new o.K("concrete material",e),this.concreteMaterial.diffuseTexture=new r.x(c,e)}baseBoxes(){this.createBox(new a.P(4,1,12),new a.P(0,0,25),new a.P(-Math.PI/8,0,0),0),this.createBox(new a.P(4,1,12),new a.P(25,0,0),new a.P(-Math.PI/8,Math.PI/2,0),0),this.createBox(new a.P(4,1,12),new a.P(0,0,-25),new a.P(Math.PI/8,0,0),0),this.createBox(new a.P(4,1,12),new a.P(-25,0,0),new a.P(Math.PI/8,Math.PI/2,0),0)}randomBoxes(){const e=new a.P,t=new a.P,s=new a.P;for(let o=0;o<20;o++){const o=300*Math.random()-150+5,a=300*Math.random()-150+5,i=10*Math.random();e.set(i,i,i),t.set(a,0,o),s.set(o,o,o),this.createBox(e,t,s,0)}for(let o=0;o<30;o++){const o=300*Math.random()-150+5,a=300*Math.random()-150+5,i=3*Math.random();e.set(i,i,i),t.set(a,0,o),s.set(o,o,o),this.createBox(e,t,s,5)}}createBox(e,t,s,o){const a=i.V.CreateBox("box",{width:e.x,depth:e.z,height:e.y},this.scene);return a.position.set(t.x,t.y,t.z),a.rotation.set(s.x,s.y,s.z),o?(a.position.y+=5,a.material=this.blueMaterial):(o=0,a.material=this.concreteMaterial),a.physicsImpostor=new n.Q(a,n.Q.BoxImpostor,{mass:o,friction:.5,restitution:.7},this.scene),a}cellBoxes(e,t){const s=e/2,o=new a.P,i=new a.P,n=new a.P;for(let a=0;a<20;a++){const a=Math.random()*e-s,r=Math.random()*e-s,c=10*Math.random();o.set(c,c,c),i.set(r,0,a),n.set(a,a,a),this.createBox(o,i,n,0).parent=t}}createCellBox(e,t,s,o){const a=i.V.CreateBox("box",{width:e.x,depth:e.z,height:e.y});return a.position.set(t.x,t.y,t.z),a.rotation.set(s.x,s.y,s.z),o?(a.position.y+=5,a.material=this.blueMaterial):(o=0,a.material=this.concreteMaterial),a.physicsImpostor=new n.Q(a,n.Q.BoxImpostor,{mass:o,friction:.5,restitution:.7},this.scene),a}}},6732:(e,t,s)=>{s.r(t),s.d(t,{DEFAULT_CELL_SIZE:()=>d,WorldMap:()=>w});var o=s(4147),a=s(9823),i=s(9635);const n=s.p+"c8f55e9ef9e4d3c0a223a3adaad7ad23.jpg";var r=s(4684),c=s(3242),h=s(7118),l=s(7417);const d=100;class w{constructor(e){this.cells=new Map,this.scene=e,this.material=new c.K("ground material",e);const t=new r.x(n,e);this.material.diffuseTexture=t,t.uScale=10,t.vScale=10,e.fogMode=o.x.FOGMODE_LINEAR,e.fogStart=20,e.fogEnd=120,e.fogColor=new l.Wo(.9,.9,.85),e.fogDensity=.03,e.clearColor=new l.HE(.9,.9,.85,1)}update(e,t){const s=[[e+1,t+1],[e+1,t],[e+1,t-1],[e,t+1],[e,t],[e,t-1],[e-1,t+1],[e-1,t],[e-1,t-1]];for(const e of s){const t=e[0],s=e[1];if(!this.cells.has(`${t},${s}`)){const e=this.createCell(this.scene,t,s);return this.cells.set(`${t},${s}`,e),void console.log(`Created cell ${t},${s}`)}}for(const s of this.cells.keys()){const[o,a]=s.split(","),i=parseInt(o),n=parseInt(a);if(i<e-1||i>e+1||n<t-1||n>t+1){const e=this.cells.get(s);e&&(this.scene.removeMesh(e),e.dispose(),this.cells.delete(s))}}}createCell(e,t,s){const o=a.V.CreateGround("ground",{width:d,height:d,subdivisions:2},e);o.position.set(t*d,0,s*d),o.physicsImpostor=new i.Q(o,i.Q.BoxImpostor,{mass:0,friction:.5,restitution:.7},e);const n=d/2,r=a.V.CreateBox("box",{width:1,depth:1,height:4},this.scene);o.addChild(r);const c=a.V.CreateBox("box",{width:1,depth:1,height:8},this.scene);c.position.set(t*d+n,4,s*d+n),o.addChild(c);const l=a.V.CreateBox("box",{width:1,depth:1,height:8},this.scene);return l.position.set(t*d-n,4,s*d-n),o.addChild(l),new h.Boxes(this.scene).cellBoxes(d,o),o.material=this.material,o}}}}]);
//# sourceMappingURL=732.babylonBundle.js.map