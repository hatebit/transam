"use strict";(self.webpackChunktrans_america=self.webpackChunktrans_america||[]).push([[898],{3832:(t,e,i)=>{i.d(e,{i:()=>p});var s=i(576),r=i(6631),o=i(4975),a=i(66),n=i(6740),h=i(4983),c=i(9346),d=i(461),_=i(8252),l=i(299),g=i(4554),u=i(5184);class p extends c.b{constructor(t,e,i,s=!0){super(t,i),this._position=h.Pq.Zero(),this._upVector=h.Pq.Up(),this._orthoLeft=null,this._orthoRight=null,this._orthoBottom=null,this._orthoTop=null,this.fov=.8,this.projectionPlaneTilt=0,this.minZ=1,this.maxZ=1e4,this.inertia=.9,this._mode=p.PERSPECTIVE_CAMERA,this.isIntermediate=!1,this.viewport=new g.L(0,0,1,1),this.layerMask=268435455,this.fovMode=p.FOVMODE_VERTICAL_FIXED,this.cameraRigMode=p.RIG_MODE_NONE,this.customRenderTargets=new Array,this.outputRenderTarget=null,this.onViewMatrixChangedObservable=new n.cP,this.onProjectionMatrixChangedObservable=new n.cP,this.onAfterCheckInputsObservable=new n.cP,this.onRestoreStateObservable=new n.cP,this.isRigCamera=!1,this._rigCameras=new Array,this._webvrViewMatrix=h.uq.Identity(),this._skipRendering=!1,this._projectionMatrix=new h.uq,this._postProcesses=new Array,this._activeMeshes=new o.L(256),this._globalPosition=h.Pq.Zero(),this._computedViewMatrix=h.uq.Identity(),this._doNotComputeProjectionMatrix=!1,this._transformMatrix=h.uq.Zero(),this._refreshFrustumPlanes=!0,this._absoluteRotation=h.PT.Identity(),this._isCamera=!0,this._isLeftCamera=!1,this._isRightCamera=!1,this.getScene().addCamera(this),s&&!this.getScene().activeCamera&&(this.getScene().activeCamera=this),this.position=e,this.renderPassId=this.getScene().getEngine().createRenderPassId(`Camera ${t}`)}get position(){return this._position}set position(t){this._position=t}set upVector(t){this._upVector=t}get upVector(){return this._upVector}get screenArea(){var t,e,i,s;let r=0,o=0;if(this.mode===p.PERSPECTIVE_CAMERA)this.fovMode===p.FOVMODE_VERTICAL_FIXED?(o=2*this.minZ*Math.tan(this.fov/2),r=this.getEngine().getAspectRatio(this)*o):(r=2*this.minZ*Math.tan(this.fov/2),o=r/this.getEngine().getAspectRatio(this));else{const a=this.getEngine().getRenderWidth()/2,n=this.getEngine().getRenderHeight()/2;r=(null!==(t=this.orthoRight)&&void 0!==t?t:a)-(null!==(e=this.orthoLeft)&&void 0!==e?e:-a),o=(null!==(i=this.orthoTop)&&void 0!==i?i:n)-(null!==(s=this.orthoBottom)&&void 0!==s?s:-n)}return r*o}set orthoLeft(t){this._orthoLeft=t;for(const e of this._rigCameras)e.orthoLeft=t}get orthoLeft(){return this._orthoLeft}set orthoRight(t){this._orthoRight=t;for(const e of this._rigCameras)e.orthoRight=t}get orthoRight(){return this._orthoRight}set orthoBottom(t){this._orthoBottom=t;for(const e of this._rigCameras)e.orthoBottom=t}get orthoBottom(){return this._orthoBottom}set orthoTop(t){this._orthoTop=t;for(const e of this._rigCameras)e.orthoTop=t}get orthoTop(){return this._orthoTop}set mode(t){this._mode=t;for(const e of this._rigCameras)e.mode=t}get mode(){return this._mode}storeState(){return this._stateStored=!0,this._storedFov=this.fov,this}_restoreStateValues(){return!!this._stateStored&&(this.fov=this._storedFov,!0)}restoreState(){return!!this._restoreStateValues()&&(this.onRestoreStateObservable.notifyObservers(this),!0)}getClassName(){return"Camera"}toString(t){let e="Name: "+this.name;if(e+=", type: "+this.getClassName(),this.animations)for(let i=0;i<this.animations.length;i++)e+=", animation[0]: "+this.animations[i].toString(t);return e}applyVerticalCorrection(){const t=this.absoluteRotation.toEulerAngles();this.projectionPlaneTilt=this._scene.useRightHandedSystem?-t.x:t.x}get globalPosition(){return this._globalPosition}getActiveMeshes(){return this._activeMeshes}isActiveMesh(t){return-1!==this._activeMeshes.indexOf(t)}isReady(t=!1){if(t)for(const t of this._postProcesses)if(t&&!t.isReady())return!1;return super.isReady(t)}_initCache(){super._initCache(),this._cache.position=new h.Pq(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),this._cache.upVector=new h.Pq(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),this._cache.mode=void 0,this._cache.minZ=void 0,this._cache.maxZ=void 0,this._cache.fov=void 0,this._cache.fovMode=void 0,this._cache.aspectRatio=void 0,this._cache.orthoLeft=void 0,this._cache.orthoRight=void 0,this._cache.orthoBottom=void 0,this._cache.orthoTop=void 0,this._cache.renderWidth=void 0,this._cache.renderHeight=void 0}_updateCache(t){t||super._updateCache(),this._cache.position.copyFrom(this.position),this._cache.upVector.copyFrom(this.upVector)}_isSynchronized(){return this._isSynchronizedViewMatrix()&&this._isSynchronizedProjectionMatrix()}_isSynchronizedViewMatrix(){return!!super._isSynchronized()&&this._cache.position.equals(this.position)&&this._cache.upVector.equals(this.upVector)&&this.isSynchronizedWithParent()}_isSynchronizedProjectionMatrix(){let t=this._cache.mode===this.mode&&this._cache.minZ===this.minZ&&this._cache.maxZ===this.maxZ;if(!t)return!1;const e=this.getEngine();return t=this.mode===p.PERSPECTIVE_CAMERA?this._cache.fov===this.fov&&this._cache.fovMode===this.fovMode&&this._cache.aspectRatio===e.getAspectRatio(this)&&this._cache.projectionPlaneTilt===this.projectionPlaneTilt:this._cache.orthoLeft===this.orthoLeft&&this._cache.orthoRight===this.orthoRight&&this._cache.orthoBottom===this.orthoBottom&&this._cache.orthoTop===this.orthoTop&&this._cache.renderWidth===e.getRenderWidth()&&this._cache.renderHeight===e.getRenderHeight(),t}attachControl(t,e){}detachControl(t){}update(){this._checkInputs(),this.cameraRigMode!==p.RIG_MODE_NONE&&this._updateRigCameras()}_checkInputs(){this.onAfterCheckInputsObservable.notifyObservers(this)}get rigCameras(){return this._rigCameras}get rigPostProcess(){return this._rigPostProcess}_getFirstPostProcess(){for(let t=0;t<this._postProcesses.length;t++)if(null!==this._postProcesses[t])return this._postProcesses[t];return null}_cascadePostProcessesToRigCams(){const t=this._getFirstPostProcess();t&&t.markTextureDirty();for(let t=0,e=this._rigCameras.length;t<e;t++){const e=this._rigCameras[t],i=e._rigPostProcess;i?("pass"===i.getEffectName()&&(e.isIntermediate=0===this._postProcesses.length),e._postProcesses=this._postProcesses.slice(0).concat(i),i.markTextureDirty()):e._postProcesses=this._postProcesses.slice(0)}}attachPostProcess(t,e=null){return!t.isReusable()&&this._postProcesses.indexOf(t)>-1?(d.V.Error("You're trying to reuse a post process not defined as reusable."),0):(null==e||e<0?this._postProcesses.push(t):null===this._postProcesses[e]?this._postProcesses[e]=t:this._postProcesses.splice(e,0,t),this._cascadePostProcessesToRigCams(),this._scene.prePassRenderer&&this._scene.prePassRenderer.markAsDirty(),this._postProcesses.indexOf(t))}detachPostProcess(t){const e=this._postProcesses.indexOf(t);-1!==e&&(this._postProcesses[e]=null),this._scene.prePassRenderer&&this._scene.prePassRenderer.markAsDirty(),this._cascadePostProcessesToRigCams()}getWorldMatrix(){return this._isSynchronizedViewMatrix()||this.getViewMatrix(),this._worldMatrix}_getViewMatrix(){return h.uq.Identity()}getViewMatrix(t){return!t&&this._isSynchronizedViewMatrix()||(this.updateCache(),this._computedViewMatrix=this._getViewMatrix(),this._currentRenderId=this.getScene().getRenderId(),this._childUpdateId++,this._refreshFrustumPlanes=!0,this._cameraRigParams&&this._cameraRigParams.vrPreViewMatrix&&this._computedViewMatrix.multiplyToRef(this._cameraRigParams.vrPreViewMatrix,this._computedViewMatrix),this.parent&&this.parent.onViewMatrixChangedObservable&&this.parent.onViewMatrixChangedObservable.notifyObservers(this.parent),this.onViewMatrixChangedObservable.notifyObservers(this),this._computedViewMatrix.invertToRef(this._worldMatrix)),this._computedViewMatrix}freezeProjectionMatrix(t){this._doNotComputeProjectionMatrix=!0,void 0!==t&&(this._projectionMatrix=t)}unfreezeProjectionMatrix(){this._doNotComputeProjectionMatrix=!1}getProjectionMatrix(t){var e,i,s,r,o,a,n,c;if(this._doNotComputeProjectionMatrix||!t&&this._isSynchronizedProjectionMatrix())return this._projectionMatrix;this._cache.mode=this.mode,this._cache.minZ=this.minZ,this._cache.maxZ=this.maxZ,this._refreshFrustumPlanes=!0;const d=this.getEngine(),_=this.getScene(),l=d.useReverseDepthBuffer;if(this.mode===p.PERSPECTIVE_CAMERA){let t;this._cache.fov=this.fov,this._cache.fovMode=this.fovMode,this._cache.aspectRatio=d.getAspectRatio(this),this._cache.projectionPlaneTilt=this.projectionPlaneTilt,this.minZ<=0&&(this.minZ=.1),t=_.useRightHandedSystem?h.uq.PerspectiveFovRHToRef:h.uq.PerspectiveFovLHToRef,t(this.fov,d.getAspectRatio(this),l?this.maxZ:this.minZ,l?this.minZ:this.maxZ,this._projectionMatrix,this.fovMode===p.FOVMODE_VERTICAL_FIXED,d.isNDCHalfZRange,this.projectionPlaneTilt,l)}else{const t=d.getRenderWidth()/2,g=d.getRenderHeight()/2;_.useRightHandedSystem?h.uq.OrthoOffCenterRHToRef(null!==(e=this.orthoLeft)&&void 0!==e?e:-t,null!==(i=this.orthoRight)&&void 0!==i?i:t,null!==(s=this.orthoBottom)&&void 0!==s?s:-g,null!==(r=this.orthoTop)&&void 0!==r?r:g,l?this.maxZ:this.minZ,l?this.minZ:this.maxZ,this._projectionMatrix,d.isNDCHalfZRange):h.uq.OrthoOffCenterLHToRef(null!==(o=this.orthoLeft)&&void 0!==o?o:-t,null!==(a=this.orthoRight)&&void 0!==a?a:t,null!==(n=this.orthoBottom)&&void 0!==n?n:-g,null!==(c=this.orthoTop)&&void 0!==c?c:g,l?this.maxZ:this.minZ,l?this.minZ:this.maxZ,this._projectionMatrix,d.isNDCHalfZRange),this._cache.orthoLeft=this.orthoLeft,this._cache.orthoRight=this.orthoRight,this._cache.orthoBottom=this.orthoBottom,this._cache.orthoTop=this.orthoTop,this._cache.renderWidth=d.getRenderWidth(),this._cache.renderHeight=d.getRenderHeight()}return this.onProjectionMatrixChangedObservable.notifyObservers(this),this._projectionMatrix}getTransformationMatrix(){return this._computedViewMatrix.multiplyToRef(this._projectionMatrix,this._transformMatrix),this._transformMatrix}_updateFrustumPlanes(){this._refreshFrustumPlanes&&(this.getTransformationMatrix(),this._frustumPlanes?u.P.GetPlanesToRef(this._transformMatrix,this._frustumPlanes):this._frustumPlanes=u.P.GetPlanes(this._transformMatrix),this._refreshFrustumPlanes=!1)}isInFrustum(t,e=!1){if(this._updateFrustumPlanes(),e&&this.rigCameras.length>0){let e=!1;return this.rigCameras.forEach((i=>{i._updateFrustumPlanes(),e=e||t.isInFrustum(i._frustumPlanes)})),e}return t.isInFrustum(this._frustumPlanes)}isCompletelyInFrustum(t){return this._updateFrustumPlanes(),t.isCompletelyInFrustum(this._frustumPlanes)}getForwardRay(t=100,e,i){throw(0,l.n)("Ray")}getForwardRayToRef(t,e=100,i,s){throw(0,l.n)("Ray")}dispose(t,e=!1){for(this.onViewMatrixChangedObservable.clear(),this.onProjectionMatrixChangedObservable.clear(),this.onAfterCheckInputsObservable.clear(),this.onRestoreStateObservable.clear(),this.inputs&&this.inputs.clear(),this.getScene().stopAnimation(this),this.getScene().removeCamera(this);this._rigCameras.length>0;){const t=this._rigCameras.pop();t&&t.dispose()}if(this._parentContainer){const t=this._parentContainer.cameras.indexOf(this);t>-1&&this._parentContainer.cameras.splice(t,1),this._parentContainer=null}if(this._rigPostProcess)this._rigPostProcess.dispose(this),this._rigPostProcess=null,this._postProcesses.length=0;else if(this.cameraRigMode!==p.RIG_MODE_NONE)this._rigPostProcess=null,this._postProcesses.length=0;else{let t=this._postProcesses.length;for(;--t>=0;){const e=this._postProcesses[t];e&&e.dispose(this)}}let i=this.customRenderTargets.length;for(;--i>=0;)this.customRenderTargets[i].dispose();this.customRenderTargets.length=0,this._activeMeshes.dispose(),this.getScene().getEngine().releaseRenderPassId(this.renderPassId),super.dispose(t,e)}get isLeftCamera(){return this._isLeftCamera}get isRightCamera(){return this._isRightCamera}get leftCamera(){return this._rigCameras.length<1?null:this._rigCameras[0]}get rightCamera(){return this._rigCameras.length<2?null:this._rigCameras[1]}getLeftTarget(){return this._rigCameras.length<1?null:this._rigCameras[0].getTarget()}getRightTarget(){return this._rigCameras.length<2?null:this._rigCameras[1].getTarget()}setCameraRigMode(t,e){if(this.cameraRigMode!==t){for(;this._rigCameras.length>0;){const t=this._rigCameras.pop();t&&t.dispose()}if(this.cameraRigMode=t,this._cameraRigParams={},this._cameraRigParams.interaxialDistance=e.interaxialDistance||.0637,this._cameraRigParams.stereoHalfAngle=a.S0.ToRadians(this._cameraRigParams.interaxialDistance/.0637),this.cameraRigMode!==p.RIG_MODE_NONE){const t=this.createRigCamera(this.name+"_L",0);t&&(t._isLeftCamera=!0);const e=this.createRigCamera(this.name+"_R",1);e&&(e._isRightCamera=!0),t&&e&&(this._rigCameras.push(t),this._rigCameras.push(e))}this._setRigMode(e),this._cascadePostProcessesToRigCams(),this.update()}}_setRigMode(t){}_getVRProjectionMatrix(){return h.uq.PerspectiveFovLHToRef(this._cameraRigParams.vrMetrics.aspectRatioFov,this._cameraRigParams.vrMetrics.aspectRatio,this.minZ,this.maxZ,this._cameraRigParams.vrWorkMatrix,!0,this.getEngine().isNDCHalfZRange),this._cameraRigParams.vrWorkMatrix.multiplyToRef(this._cameraRigParams.vrHMatrix,this._projectionMatrix),this._projectionMatrix}_updateCameraRotationMatrix(){}_updateWebVRCameraRotationMatrix(){}_getWebVRProjectionMatrix(){return h.uq.Identity()}_getWebVRViewMatrix(){return h.uq.Identity()}setCameraRigParameter(t,e){this._cameraRigParams||(this._cameraRigParams={}),this._cameraRigParams[t]=e,"interaxialDistance"===t&&(this._cameraRigParams.stereoHalfAngle=a.S0.ToRadians(e/.0637))}createRigCamera(t,e){return null}_updateRigCameras(){for(let t=0;t<this._rigCameras.length;t++)this._rigCameras[t].minZ=this.minZ,this._rigCameras[t].maxZ=this.maxZ,this._rigCameras[t].fov=this.fov,this._rigCameras[t].upVector.copyFrom(this.upVector);this.cameraRigMode===p.RIG_MODE_STEREOSCOPIC_ANAGLYPH&&(this._rigCameras[0].viewport=this._rigCameras[1].viewport=this.viewport)}_setupInputs(){}serialize(){const t=r.pB.Serialize(this);return t.uniqueId=this.uniqueId,t.type=this.getClassName(),this.parent&&this.parent._serializeAsParent(t),this.inputs&&this.inputs.serialize(t),r.pB.AppendSerializedAnimations(this,t),t.ranges=this.serializeAnimationRanges(),t.isEnabled=this.isEnabled(),t}clone(t,e=null){const i=r.pB.Clone(p.GetConstructorFromName(this.getClassName(),t,this.getScene(),this.interaxialDistance,this.isStereoscopicSideBySide),this);return i.name=t,i.parent=e,this.onClonedObservable.notifyObservers(i),i}getDirection(t){const e=h.Pq.Zero();return this.getDirectionToRef(t,e),e}get absoluteRotation(){return this.getWorldMatrix().decompose(void 0,this._absoluteRotation),this._absoluteRotation}getDirectionToRef(t,e){h.Pq.TransformNormalToRef(t,this.getWorldMatrix(),e)}static GetConstructorFromName(t,e,i,s=0,r=!0){return c.b.Construct(t,e,i,{interaxial_distance:s,isStereoscopicSideBySide:r})||(()=>p._CreateDefaultParsedCamera(e,i))}computeWorldMatrix(){return this.getWorldMatrix()}static Parse(t,e){const i=t.type,s=p.GetConstructorFromName(i,t.name,e,t.interaxial_distance,t.isStereoscopicSideBySide),o=r.pB.Parse(s,t,e);if(void 0!==t.parentId&&(o._waitingParentId=t.parentId),void 0!==t.parentInstanceIndex&&(o._waitingParentInstanceIndex=t.parentInstanceIndex),o.inputs&&(o.inputs.parse(t),o._setupInputs()),t.upVector&&(o.upVector=h.Pq.FromArray(t.upVector)),o.setPosition&&(o.position.copyFromFloats(0,0,0),o.setPosition(h.Pq.FromArray(t.position))),t.target&&o.setTarget&&o.setTarget(h.Pq.FromArray(t.target)),t.cameraRigMode){const e=t.interaxial_distance?{interaxialDistance:t.interaxial_distance}:{};o.setCameraRigMode(t.cameraRigMode,e)}if(t.animations){for(let e=0;e<t.animations.length;e++){const i=t.animations[e],s=(0,_.n)("BABYLON.Animation");s&&o.animations.push(s.Parse(i))}c.b.ParseAnimationRanges(o,t,e)}return t.autoAnimate&&e.beginAnimation(o,t.autoAnimateFrom,t.autoAnimateTo,t.autoAnimateLoop,t.autoAnimateSpeed||1),void 0!==t.isEnabled&&o.setEnabled(t.isEnabled),o}}p._CreateDefaultParsedCamera=(t,e)=>{throw(0,l.n)("UniversalCamera")},p.PERSPECTIVE_CAMERA=0,p.ORTHOGRAPHIC_CAMERA=1,p.FOVMODE_VERTICAL_FIXED=0,p.FOVMODE_HORIZONTAL_FIXED=1,p.RIG_MODE_NONE=0,p.RIG_MODE_STEREOSCOPIC_ANAGLYPH=10,p.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_PARALLEL=11,p.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_CROSSEYED=12,p.RIG_MODE_STEREOSCOPIC_OVERUNDER=13,p.RIG_MODE_STEREOSCOPIC_INTERLACED=14,p.RIG_MODE_VR=20,p.RIG_MODE_WEBVR=21,p.RIG_MODE_CUSTOM=22,p.ForceAttachControlToAlwaysPreventDefault=!1,(0,s.Cg)([(0,r.P_)("position")],p.prototype,"_position",void 0),(0,s.Cg)([(0,r.P_)("upVector")],p.prototype,"_upVector",void 0),(0,s.Cg)([(0,r.lK)()],p.prototype,"orthoLeft",null),(0,s.Cg)([(0,r.lK)()],p.prototype,"orthoRight",null),(0,s.Cg)([(0,r.lK)()],p.prototype,"orthoBottom",null),(0,s.Cg)([(0,r.lK)()],p.prototype,"orthoTop",null),(0,s.Cg)([(0,r.lK)()],p.prototype,"fov",void 0),(0,s.Cg)([(0,r.lK)()],p.prototype,"projectionPlaneTilt",void 0),(0,s.Cg)([(0,r.lK)()],p.prototype,"minZ",void 0),(0,s.Cg)([(0,r.lK)()],p.prototype,"maxZ",void 0),(0,s.Cg)([(0,r.lK)()],p.prototype,"inertia",void 0),(0,s.Cg)([(0,r.lK)()],p.prototype,"mode",null),(0,s.Cg)([(0,r.lK)()],p.prototype,"layerMask",void 0),(0,s.Cg)([(0,r.lK)()],p.prototype,"fovMode",void 0),(0,s.Cg)([(0,r.lK)()],p.prototype,"cameraRigMode",void 0),(0,s.Cg)([(0,r.lK)()],p.prototype,"interaxialDistance",void 0),(0,s.Cg)([(0,r.lK)()],p.prototype,"isStereoscopicSideBySide",void 0)},9046:(t,e,i)=>{i.d(e,{Bu:()=>o,TB:()=>s,W0:()=>r});class s{}s.KEYDOWN=1,s.KEYUP=2;class r{constructor(t,e){this.type=t,this.event=e}}class o extends r{constructor(t,e){super(t,e),this.type=t,this.event=e,this.skipOnKeyboardObservable=!1}get skipOnPointerObservable(){return this.skipOnKeyboardObservable}set skipOnPointerObservable(t){this.skipOnKeyboardObservable=t}}},1780:(t,e,i)=>{i.d(e,{Zp:()=>r,mx:()=>n,tT:()=>a});var s=i(4983);class r{}r.POINTERDOWN=1,r.POINTERUP=2,r.POINTERMOVE=4,r.POINTERWHEEL=8,r.POINTERPICK=16,r.POINTERTAP=32,r.POINTERDOUBLETAP=64;class o{constructor(t,e){this.type=t,this.event=e}}class a extends o{constructor(t,e,i,r){super(t,e),this.ray=null,this.originalPickingInfo=null,this.skipOnPointerObservable=!1,this.localPosition=new s.I9(i,r)}}class n extends o{constructor(t,e,i,s=null){super(t,e),this._pickInfo=i,this._inputManager=s}get pickInfo(){return this._pickInfo||this._generatePickInfo(),this._pickInfo}_generatePickInfo(){this._inputManager&&(this._pickInfo=this._inputManager._pickMove(this.event.pointerId),this._inputManager._setRayOnPointerInfo(this._pickInfo,this.event),this._inputManager=null)}}},9346:(t,e,i)=>{i.d(e,{b:()=>d});var s=i(576),r=i(4983),o=i(6631),a=i(6740),n=i(9583),h=i(299);class c{constructor(){this._doNotSerialize=!1,this._isDisposed=!1,this._sceneRootNodesIndex=-1,this._isEnabled=!0,this._isParentEnabled=!0,this._isReady=!0,this._onEnabledStateChangedObservable=new a.cP,this._onClonedObservable=new a.cP}}class d{constructor(t,e=null){this._isDirty=!1,this._nodeDataStorage=new c,this.state="",this.metadata=null,this.reservedDataStore=null,this._accessibilityTag=null,this.onAccessibilityTagChangedObservable=new a.cP,this._parentContainer=null,this.animations=new Array,this._ranges={},this.onReady=null,this._currentRenderId=-1,this._parentUpdateId=-1,this._childUpdateId=-1,this._waitingParentId=null,this._waitingParentInstanceIndex=null,this._waitingParsedUniqueId=null,this._cache={},this._parentNode=null,this._children=null,this._worldMatrix=r.uq.Identity(),this._worldMatrixDeterminant=0,this._worldMatrixDeterminantIsDirty=!0,this._animationPropertiesOverride=null,this._isNode=!0,this.onDisposeObservable=new a.cP,this._onDisposeObserver=null,this._behaviors=new Array,this.name=t,this.id=t,this._scene=e||n.q.LastCreatedScene,this.uniqueId=this._scene.getUniqueId(),this._initCache()}static AddNodeConstructor(t,e){this._NodeConstructors[t]=e}static Construct(t,e,i,s){const r=this._NodeConstructors[t];return r?r(e,i,s):null}set accessibilityTag(t){this._accessibilityTag=t,this.onAccessibilityTagChangedObservable.notifyObservers(t)}get accessibilityTag(){return this._accessibilityTag}get doNotSerialize(){return!!this._nodeDataStorage._doNotSerialize||!!this._parentNode&&this._parentNode.doNotSerialize}set doNotSerialize(t){this._nodeDataStorage._doNotSerialize=t}isDisposed(){return this._nodeDataStorage._isDisposed}set parent(t){if(this._parentNode===t)return;const e=this._parentNode;if(this._parentNode&&void 0!==this._parentNode._children&&null!==this._parentNode._children){const e=this._parentNode._children.indexOf(this);-1!==e&&this._parentNode._children.splice(e,1),t||this._nodeDataStorage._isDisposed||this._addToSceneRootNodes()}this._parentNode=t,this._parentNode&&(void 0!==this._parentNode._children&&null!==this._parentNode._children||(this._parentNode._children=new Array),this._parentNode._children.push(this),e||this._removeFromSceneRootNodes()),this._syncParentEnabledState()}get parent(){return this._parentNode}_serializeAsParent(t){t.parentId=this.uniqueId}_addToSceneRootNodes(){-1===this._nodeDataStorage._sceneRootNodesIndex&&(this._nodeDataStorage._sceneRootNodesIndex=this._scene.rootNodes.length,this._scene.rootNodes.push(this))}_removeFromSceneRootNodes(){if(-1!==this._nodeDataStorage._sceneRootNodesIndex){const t=this._scene.rootNodes,e=t.length-1;t[this._nodeDataStorage._sceneRootNodesIndex]=t[e],t[this._nodeDataStorage._sceneRootNodesIndex]._nodeDataStorage._sceneRootNodesIndex=this._nodeDataStorage._sceneRootNodesIndex,this._scene.rootNodes.pop(),this._nodeDataStorage._sceneRootNodesIndex=-1}}get animationPropertiesOverride(){return this._animationPropertiesOverride?this._animationPropertiesOverride:this._scene.animationPropertiesOverride}set animationPropertiesOverride(t){this._animationPropertiesOverride=t}getClassName(){return"Node"}set onDispose(t){this._onDisposeObserver&&this.onDisposeObservable.remove(this._onDisposeObserver),this._onDisposeObserver=this.onDisposeObservable.add(t)}get onEnabledStateChangedObservable(){return this._nodeDataStorage._onEnabledStateChangedObservable}get onClonedObservable(){return this._nodeDataStorage._onClonedObservable}getScene(){return this._scene}getEngine(){return this._scene.getEngine()}addBehavior(t,e=!1){return-1!==this._behaviors.indexOf(t)||(t.init(),this._scene.isLoading&&!e?this._scene.onDataLoadedObservable.addOnce((()=>{t.attach(this)})):t.attach(this),this._behaviors.push(t)),this}removeBehavior(t){const e=this._behaviors.indexOf(t);return-1===e||(this._behaviors[e].detach(),this._behaviors.splice(e,1)),this}get behaviors(){return this._behaviors}getBehaviorByName(t){for(const e of this._behaviors)if(e.name===t)return e;return null}getWorldMatrix(){return this._currentRenderId!==this._scene.getRenderId()&&this.computeWorldMatrix(),this._worldMatrix}_getWorldMatrixDeterminant(){return this._worldMatrixDeterminantIsDirty&&(this._worldMatrixDeterminantIsDirty=!1,this._worldMatrixDeterminant=this._worldMatrix.determinant()),this._worldMatrixDeterminant}get worldMatrixFromCache(){return this._worldMatrix}_initCache(){this._cache={},this._cache.parent=void 0}updateCache(t){!t&&this.isSynchronized()||(this._cache.parent=this.parent,this._updateCache())}_getActionManagerForTrigger(t,e=!0){return this.parent?this.parent._getActionManagerForTrigger(t,!1):null}_updateCache(t){}_isSynchronized(){return!0}_markSyncedWithParent(){this._parentNode&&(this._parentUpdateId=this._parentNode._childUpdateId)}isSynchronizedWithParent(){return!this._parentNode||!this._parentNode._isDirty&&this._parentUpdateId===this._parentNode._childUpdateId&&this._parentNode.isSynchronized()}isSynchronized(){return this._cache.parent!==this._parentNode?(this._cache.parent=this._parentNode,!1):!(this._parentNode&&!this.isSynchronizedWithParent())&&this._isSynchronized()}isReady(t=!1){return this._nodeDataStorage._isReady}markAsDirty(t){return this._currentRenderId=Number.MAX_VALUE,this._isDirty=!0,this}isEnabled(t=!0){return!1===t?this._nodeDataStorage._isEnabled:!!this._nodeDataStorage._isEnabled&&this._nodeDataStorage._isParentEnabled}_syncParentEnabledState(){this._nodeDataStorage._isParentEnabled=!this._parentNode||this._parentNode.isEnabled(),this._children&&this._children.forEach((t=>{t._syncParentEnabledState()}))}setEnabled(t){this._nodeDataStorage._isEnabled!==t&&(this._nodeDataStorage._isEnabled=t,this._syncParentEnabledState(),this._nodeDataStorage._onEnabledStateChangedObservable.notifyObservers(t))}isDescendantOf(t){return!!this.parent&&(this.parent===t||this.parent.isDescendantOf(t))}_getDescendants(t,e=!1,i){if(this._children)for(let s=0;s<this._children.length;s++){const r=this._children[s];i&&!i(r)||t.push(r),e||r._getDescendants(t,!1,i)}}getDescendants(t,e){const i=new Array;return this._getDescendants(i,t,e),i}getChildMeshes(t,e){const i=[];return this._getDescendants(i,t,(t=>(!e||e(t))&&void 0!==t.cullingStrategy)),i}getChildren(t,e=!0){return this.getDescendants(e,t)}_setReady(t){t!==this._nodeDataStorage._isReady&&(t?(this.onReady&&this.onReady(this),this._nodeDataStorage._isReady=!0):this._nodeDataStorage._isReady=!1)}getAnimationByName(t){for(let e=0;e<this.animations.length;e++){const i=this.animations[e];if(i.name===t)return i}return null}createAnimationRange(t,e,i){if(!this._ranges[t]){this._ranges[t]=d._AnimationRangeFactory(t,e,i);for(let s=0,r=this.animations.length;s<r;s++)this.animations[s]&&this.animations[s].createRange(t,e,i)}}deleteAnimationRange(t,e=!0){for(let i=0,s=this.animations.length;i<s;i++)this.animations[i]&&this.animations[i].deleteRange(t,e);this._ranges[t]=null}getAnimationRange(t){return this._ranges[t]||null}getAnimationRanges(){const t=[];let e;for(e in this._ranges)t.push(this._ranges[e]);return t}beginAnimation(t,e,i,s){const r=this.getAnimationRange(t);return r?this._scene.beginAnimation(this,r.from,r.to,e,i,s):null}serializeAnimationRanges(){const t=[];for(const e in this._ranges){const i=this._ranges[e];if(!i)continue;const s={};s.name=e,s.from=i.from,s.to=i.to,t.push(s)}return t}computeWorldMatrix(t){return this._worldMatrix||(this._worldMatrix=r.uq.Identity()),this._worldMatrix}dispose(t,e=!1){if(this._nodeDataStorage._isDisposed=!0,!t){const i=this.getDescendants(!0);for(const s of i)s.dispose(t,e)}this.parent?this.parent=null:this._removeFromSceneRootNodes(),this.onDisposeObservable.notifyObservers(this),this.onDisposeObservable.clear(),this.onEnabledStateChangedObservable.clear(),this.onClonedObservable.clear();for(const t of this._behaviors)t.detach();this._behaviors.length=0,this.metadata=null}static ParseAnimationRanges(t,e,i){if(e.ranges)for(let i=0;i<e.ranges.length;i++){const s=e.ranges[i];t.createAnimationRange(s.name,s.from,s.to)}}getHierarchyBoundingVectors(t=!0,e=null){let i,s;this.getScene().incrementRenderId(),this.computeWorldMatrix(!0);const o=this;if(o.getBoundingInfo&&o.subMeshes){const t=o.getBoundingInfo();i=t.boundingBox.minimumWorld.clone(),s=t.boundingBox.maximumWorld.clone()}else i=new r.Pq(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),s=new r.Pq(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);if(t){const t=this.getDescendants(!1);for(const o of t){const t=o;if(t.computeWorldMatrix(!0),e&&!e(t))continue;if(!t.getBoundingInfo||0===t.getTotalVertices())continue;const a=t.getBoundingInfo().boundingBox,n=a.minimumWorld,h=a.maximumWorld;r.Pq.CheckExtends(n,i,s),r.Pq.CheckExtends(h,i,s)}}return{min:i,max:s}}}d._AnimationRangeFactory=(t,e,i)=>{throw(0,h.n)("AnimationRange")},d._NodeConstructors={},(0,s.Cg)([(0,o.lK)()],d.prototype,"name",void 0),(0,s.Cg)([(0,o.lK)()],d.prototype,"id",void 0),(0,s.Cg)([(0,o.lK)()],d.prototype,"uniqueId",void 0),(0,s.Cg)([(0,o.lK)()],d.prototype,"state",void 0),(0,s.Cg)([(0,o.lK)()],d.prototype,"metadata",void 0)}}]);
//# sourceMappingURL=898.babylonBundle.js.map