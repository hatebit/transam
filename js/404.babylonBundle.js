"use strict";(self.webpackChunktrans_america=self.webpackChunktrans_america||[]).push([[404,783],{7191:(e,t,r)=>{var a=r(58478),o=r(70461),n=r(42712),l=r(88076),s=r(80770),i=r(84306);s.$.prototype._partialLoadFile=function(e,t,r,a,o=null){this._loadFile(e,(e=>{r[t]=e,r._internalCount++,6===r._internalCount&&a(r)}),void 0,void 0,!0,((e,t)=>{o&&e&&o(e.status+" "+e.statusText,t)}))},s.$.prototype._cascadeLoadFiles=function(e,t,r,a=null){const o=[];o._internalCount=0;for(let e=0;e<6;e++)this._partialLoadFile(r[e],e,o,t,a)},s.$.prototype._cascadeLoadImgs=function(e,t,r,a,o=null,n){const l=[];l._internalCount=0;for(let s=0;s<6;s++)this._partialLoadImg(a[s],s,l,e,t,r,o,n)},s.$.prototype._partialLoadImg=function(e,t,r,a,o,s,i=null,f){const u=(0,l.z)();(0,n.W$)(e,(e=>{r[t]=e,r._internalCount++,a&&a.removePendingData(u),6===r._internalCount&&s&&s(o,r)}),((e,t)=>{a&&a.removePendingData(u),i&&i(e,t)}),a?a.offlineProvider:null,f),a&&a.addPendingData(u)},s.$.prototype.createCubeTextureBase=function(e,t,r,n,l=null,s=null,f,u=null,c=!1,d=0,A=0,p=null,h=null,y=null,m=!1,_=null){const C=p||new a.hV(this,7);C.isCube=!0,C.url=e,C.generateMipMaps=!n,C._lodGenerationScale=d,C._lodGenerationOffset=A,C._useSRGBBuffer=!!m&&this._caps.supportSRGBBuffers&&(this.version>1||this.isWebGPU||!!n),C!==p&&(C.label=e.substring(0,60)),this._doNotHandleContextLost||(C._extension=u,C._files=r,C._buffer=_);const w=e;this._transformTextureUrl&&!p&&(e=this._transformTextureUrl(e));const F=e.split("?")[0],b=F.lastIndexOf("."),B=u||(b>-1?F.substring(b).toLowerCase():""),G=(0,i.gT)(B),x=(a,i)=>{e===w?s&&a&&s(a.status+" "+a.statusText,i):(o.V.Warn(`Failed to load ${e}, falling back to the ${w}`),this.createCubeTextureBase(w,t,r,!!n,l,s,f,u,c,d,A,C,h,y,m,_))};if(G)G.then((a=>{const n=e=>{h&&h(C,e),a.loadCubeData(e,C,c,l,s)};_?n(_):r&&6===r.length?a.supportCascades?this._cascadeLoadFiles(t,(e=>n(e.map((e=>new Uint8Array(e))))),r,s):s?s("Textures type does not support cascades."):o.V.Warn("Texture loader does not support cascades."):this._loadFile(e,(e=>n(new Uint8Array(e))),void 0,void 0,!0,x)}));else{if(!r||0===r.length)throw new Error("Cannot load cubemap because files were not defined, or the correct loader was not found.");this._cascadeLoadImgs(t,C,((e,t)=>{y&&y(e,t)}),r,s)}return this._internalTexturesCache.push(C),C}},9783:(e,t,r)=>{r.d(t,{d:()=>f});var a=r(54983),o=r(49111),n=r(47369),l=r(50507),s=r(39341);class i{constructor(e,t,r,a){this.name=e,this.worldAxisForNormal=t,this.worldAxisForFileX=r,this.worldAxisForFileY=a}}class f{static ConvertCubeMapTextureToSphericalPolynomial(e){if(!e.isCube)return null;e.getScene()?.getEngine().flushFramebuffer();const t=e.getSize().width,r=e.readPixels(0,void 0,void 0,!1),a=e.readPixels(1,void 0,void 0,!1);let o,n;e.isRenderTarget?(o=e.readPixels(3,void 0,void 0,!1),n=e.readPixels(2,void 0,void 0,!1)):(o=e.readPixels(2,void 0,void 0,!1),n=e.readPixels(3,void 0,void 0,!1));const l=e.readPixels(4,void 0,void 0,!1),s=e.readPixels(5,void 0,void 0,!1),i=e.gammaSpace;let f=0;return 1!=e.textureType&&2!=e.textureType||(f=1),new Promise((e=>{Promise.all([a,r,o,n,l,s]).then((([r,a,o,n,l,s])=>{const u={size:t,right:a,left:r,up:o,down:n,front:l,back:s,format:5,type:f,gammaSpace:i};e(this.ConvertCubeMapToSphericalPolynomial(u))}))}))}static _AreaElement(e,t){return Math.atan2(e*t,Math.sqrt(e*e+t*t+1))}static ConvertCubeMapToSphericalPolynomial(e){const t=new n.O;let r=0;const a=2/e.size,i=a,f=.5*a,u=f-1;for(let n=0;n<6;n++){const c=this._FileFaces[n],d=e[c.name];let A=u;const p=5===e.format?4:3;for(let n=0;n<e.size;n++){let h=u;for(let i=0;i<e.size;i++){const u=c.worldAxisForFileX.scale(h).add(c.worldAxisForFileY.scale(A)).add(c.worldAxisForNormal);u.normalize();const y=this._AreaElement(h-f,A-f)-this._AreaElement(h-f,A+f)-this._AreaElement(h+f,A-f)+this._AreaElement(h+f,A+f);let m=d[n*e.size*p+i*p+0],_=d[n*e.size*p+i*p+1],C=d[n*e.size*p+i*p+2];isNaN(m)&&(m=0),isNaN(_)&&(_=0),isNaN(C)&&(C=0),0===e.type&&(m/=255,_/=255,C/=255),e.gammaSpace&&(m=Math.pow((0,o.Clamp)(m),l.tk),_=Math.pow((0,o.Clamp)(_),l.tk),C=Math.pow((0,o.Clamp)(C),l.tk));const w=this.MAX_HDRI_VALUE;if(this.PRESERVE_CLAMPED_COLORS){const e=Math.max(m,_,C);if(e>w){const t=w/e;m*=t,_*=t,C*=t}}else m=(0,o.Clamp)(m,0,w),_=(0,o.Clamp)(_,0,w),C=(0,o.Clamp)(C,0,w);const F=new s.v9(m,_,C);t.addLight(u,F,y),r+=y,h+=a}A+=i}}const c=4*Math.PI*6/6/r;return t.scaleInPlace(c),t.convertIncidentRadianceToIrradiance(),t.convertIrradianceToLambertianRadiance(),n.Q.FromHarmonics(t)}}f._FileFaces=[new i("right",new a.Pq(1,0,0),new a.Pq(0,0,-1),new a.Pq(0,-1,0)),new i("left",new a.Pq(-1,0,0),new a.Pq(0,0,1),new a.Pq(0,-1,0)),new i("up",new a.Pq(0,1,0),new a.Pq(1,0,0),new a.Pq(0,0,1)),new i("down",new a.Pq(0,-1,0),new a.Pq(1,0,0),new a.Pq(0,0,-1)),new i("front",new a.Pq(0,0,1),new a.Pq(1,0,0),new a.Pq(0,-1,0)),new i("back",new a.Pq(0,0,-1),new a.Pq(-1,0,0),new a.Pq(0,-1,0))],f.MAX_HDRI_VALUE=4096,f.PRESERVE_CLAMPED_COLORS=!1},83404:(e,t,r)=>{r.d(t,{DDSTools:()=>p});var a=r(49111),o=r(70461),n=r(9783),l=r(89783);r(7191);const s=131072,i=131072;function f(e){return e.charCodeAt(0)+(e.charCodeAt(1)<<8)+(e.charCodeAt(2)<<16)+(e.charCodeAt(3)<<24)}const u=f("DXT1"),c=f("DXT3"),d=f("DXT5"),A=f("DX10");class p{static GetDDSInfo(e){const t=new Int32Array(e.buffer,e.byteOffset,31),r=new Int32Array(e.buffer,e.byteOffset,35);let a=1;t[2]&s&&(a=Math.max(1,t[7]));const o=t[21],n=o===A?r[32]:0;let l=0;switch(o){case 113:l=2;break;case 116:l=1;break;case A:if(10===n){l=2;break}if(2===n){l=1;break}}return{width:t[4],height:t[3],mipmapCount:a,isFourCC:!(4&~t[20]),isRGB:!(64&~t[20]),isLuminance:(t[20]&i)===i,isCube:!(512&~t[28]),isCompressed:o===u||o===c||o===d,dxgiFormat:n,textureType:l}}static _GetHalfFloatAsFloatRGBAArrayBuffer(e,t,r,a,o,n){const s=new Float32Array(a),i=new Uint16Array(o,r);let f=0;for(let r=0;r<t;r++)for(let t=0;t<e;t++){const a=4*(t+r*e);s[f]=(0,l.SX)(i[a]),s[f+1]=(0,l.SX)(i[a+1]),s[f+2]=(0,l.SX)(i[a+2]),p.StoreLODInAlphaChannel?s[f+3]=n:s[f+3]=(0,l.SX)(i[a+3]),f+=4}return s}static _GetHalfFloatRGBAArrayBuffer(e,t,r,a,o,n){if(p.StoreLODInAlphaChannel){const s=new Uint16Array(a),i=new Uint16Array(o,r);let f=0;for(let r=0;r<t;r++)for(let t=0;t<e;t++){const a=4*(t+r*e);s[f]=i[a],s[f+1]=i[a+1],s[f+2]=i[a+2],s[f+3]=(0,l.LZ)(n),f+=4}return s}return new Uint16Array(o,r,a)}static _GetFloatRGBAArrayBuffer(e,t,r,a,o,n){if(p.StoreLODInAlphaChannel){const l=new Float32Array(a),s=new Float32Array(o,r);let i=0;for(let r=0;r<t;r++)for(let t=0;t<e;t++){const a=4*(t+r*e);l[i]=s[a],l[i+1]=s[a+1],l[i+2]=s[a+2],l[i+3]=n,i+=4}return l}return new Float32Array(o,r,a)}static _GetFloatAsHalfFloatRGBAArrayBuffer(e,t,r,a,o,n){const s=new Uint16Array(a),i=new Float32Array(o,r);let f=0;for(let r=0;r<t;r++)for(let t=0;t<e;t++)s[f]=(0,l.LZ)(i[f]),s[f+1]=(0,l.LZ)(i[f+1]),s[f+2]=(0,l.LZ)(i[f+2]),p.StoreLODInAlphaChannel?s[f+3]=(0,l.LZ)(n):s[f+3]=(0,l.LZ)(i[f+3]),f+=4;return s}static _GetFloatAsUIntRGBAArrayBuffer(e,t,r,o,n,l){const s=new Uint8Array(o),i=new Float32Array(n,r);let f=0;for(let r=0;r<t;r++)for(let t=0;t<e;t++){const o=4*(t+r*e);s[f]=255*(0,a.Clamp)(i[o]),s[f+1]=255*(0,a.Clamp)(i[o+1]),s[f+2]=255*(0,a.Clamp)(i[o+2]),p.StoreLODInAlphaChannel?s[f+3]=l:s[f+3]=255*(0,a.Clamp)(i[o+3]),f+=4}return s}static _GetHalfFloatAsUIntRGBAArrayBuffer(e,t,r,o,n,s){const i=new Uint8Array(o),f=new Uint16Array(n,r);let u=0;for(let r=0;r<t;r++)for(let t=0;t<e;t++){const o=4*(t+r*e);i[u]=255*(0,a.Clamp)((0,l.SX)(f[o])),i[u+1]=255*(0,a.Clamp)((0,l.SX)(f[o+1])),i[u+2]=255*(0,a.Clamp)((0,l.SX)(f[o+2])),p.StoreLODInAlphaChannel?i[u+3]=s:i[u+3]=255*(0,a.Clamp)((0,l.SX)(f[o+3])),u+=4}return i}static _GetRGBAArrayBuffer(e,t,r,a,o,n,l,s,i){const f=new Uint8Array(a),u=new Uint8Array(o,r);let c=0;for(let r=0;r<t;r++)for(let t=0;t<e;t++){const a=4*(t+r*e);f[c]=u[a+n],f[c+1]=u[a+l],f[c+2]=u[a+s],f[c+3]=u[a+i],c+=4}return f}static _ExtractLongWordOrder(e){return 0===e||255===e||-16777216===e?0:1+p._ExtractLongWordOrder(e>>8)}static _GetRGBArrayBuffer(e,t,r,a,o,n,l,s){const i=new Uint8Array(a),f=new Uint8Array(o,r);let u=0;for(let r=0;r<t;r++)for(let t=0;t<e;t++){const a=3*(t+r*e);i[u]=f[a+n],i[u+1]=f[a+l],i[u+2]=f[a+s],u+=3}return i}static _GetLuminanceArrayBuffer(e,t,r,a,o){const n=new Uint8Array(a),l=new Uint8Array(o,r);let s=0;for(let r=0;r<t;r++)for(let t=0;t<e;t++){const a=t+r*e;n[s]=l[a],s++}return n}static UploadDDSLevels(e,t,r,a,l,i,f=-1,h,y=!0){let m=null;a.sphericalPolynomial&&(m=[]);const _=!!e.getCaps().s3tc;t.generateMipMaps=l;const C=new Int32Array(r.buffer,r.byteOffset,31);let w,F,b,B,G,x,g,L=0,P=0,v=1;if(542327876!==C[0])return void o.V.Error("Invalid magic number in DDS header");if(!a.isFourCC&&!a.isRGB&&!a.isLuminance)return void o.V.Error("Unsupported format, must contain a FourCC, RGB or LUMINANCE code");if(a.isCompressed&&!_)return void o.V.Error("Compressed textures are not supported on this platform.");let R=C[22];B=C[1]+4;let S=!1;if(a.isFourCC)switch(w=C[21],w){case u:v=8,P=33777;break;case c:v=16,P=33778;break;case d:v=16,P=33779;break;case 113:S=!0,R=64;break;case 116:S=!0,R=128;break;case A:{B+=20;let e=!1;switch(a.dxgiFormat){case 10:S=!0,R=64,e=!0;break;case 2:S=!0,R=128,e=!0;break;case 88:a.isRGB=!0,a.isFourCC=!1,R=32,e=!0}if(e)break}default:return void o.V.Error(["Unsupported FourCC code:",(D=w,String.fromCharCode(255&D,D>>8&255,D>>16&255,D>>24&255))])}var D;const T=p._ExtractLongWordOrder(C[23]),O=p._ExtractLongWordOrder(C[24]),U=p._ExtractLongWordOrder(C[25]),I=p._ExtractLongWordOrder(C[26]);S&&(P=e._getRGBABufferInternalSizedFormat(a.textureType)),x=1,C[2]&s&&!1!==l&&(x=Math.max(1,C[7]));const k=h||0,E=e.getCaps();for(let o=k;o<i;o++){for(F=C[4],b=C[3],g=0;g<x;++g){if(-1===f||f===g){const n=-1===f?g:0;if(!a.isCompressed&&a.isFourCC){t.format=5,L=F*b*4;let a=null;if(e._badOS||e._badDesktopOS||!E.textureHalfFloat&&!E.textureFloat)128===R?(a=p._GetFloatAsUIntRGBAArrayBuffer(F,b,r.byteOffset+B,L,r.buffer,n),m&&0==n&&m.push(p._GetFloatRGBAArrayBuffer(F,b,r.byteOffset+B,L,r.buffer,n))):64===R&&(a=p._GetHalfFloatAsUIntRGBAArrayBuffer(F,b,r.byteOffset+B,L,r.buffer,n),m&&0==n&&m.push(p._GetHalfFloatAsFloatRGBAArrayBuffer(F,b,r.byteOffset+B,L,r.buffer,n))),t.type=0;else{const e=E.textureFloat&&(y&&E.textureFloatLinearFiltering||!y),o=E.textureHalfFloat&&(y&&E.textureHalfFloatLinearFiltering||!y),l=(128===R||64===R&&!o)&&e?1:(64===R||128===R&&!e)&&o?2:0;let s,i=null;if(128===R)switch(l){case 1:s=p._GetFloatRGBAArrayBuffer,i=null;break;case 2:s=p._GetFloatAsHalfFloatRGBAArrayBuffer,i=p._GetFloatRGBAArrayBuffer;break;case 0:s=p._GetFloatAsUIntRGBAArrayBuffer,i=p._GetFloatRGBAArrayBuffer}else switch(l){case 1:s=p._GetHalfFloatAsFloatRGBAArrayBuffer,i=null;break;case 2:s=p._GetHalfFloatRGBAArrayBuffer,i=p._GetHalfFloatAsFloatRGBAArrayBuffer;break;case 0:s=p._GetHalfFloatAsUIntRGBAArrayBuffer,i=p._GetHalfFloatAsFloatRGBAArrayBuffer}t.type=l,a=s(F,b,r.byteOffset+B,L,r.buffer,n),m&&0==n&&m.push(i?i(F,b,r.byteOffset+B,L,r.buffer,n):a)}a&&e._uploadDataToTextureDirectly(t,a,o,n)}else if(a.isRGB)t.type=0,24===R?(t.format=4,L=F*b*3,G=p._GetRGBArrayBuffer(F,b,r.byteOffset+B,L,r.buffer,T,O,U),e._uploadDataToTextureDirectly(t,G,o,n)):(t.format=5,L=F*b*4,G=p._GetRGBAArrayBuffer(F,b,r.byteOffset+B,L,r.buffer,T,O,U,I),e._uploadDataToTextureDirectly(t,G,o,n));else if(a.isLuminance){const a=e._getUnpackAlignement(),l=F;L=Math.floor((F+a-1)/a)*a*(b-1)+l,G=p._GetLuminanceArrayBuffer(F,b,r.byteOffset+B,L,r.buffer),t.format=1,t.type=0,e._uploadDataToTextureDirectly(t,G,o,n)}else L=Math.max(4,F)/4*Math.max(4,b)/4*v,G=new Uint8Array(r.buffer,r.byteOffset+B,L),t.type=0,e._uploadCompressedDataToTextureDirectly(t,P,F,b,G,o,n)}B+=R?F*b*(R/8):L,F*=.5,b*=.5,F=Math.max(1,F),b=Math.max(1,b)}if(void 0!==h)break}m&&m.length>0?a.sphericalPolynomial=n.d.ConvertCubeMapToSphericalPolynomial({size:C[4],right:m[0],left:m[1],up:m[2],down:m[3],front:m[4],back:m[5],format:5,type:1,gammaSpace:!1}):a.sphericalPolynomial=void 0}}p.StoreLODInAlphaChannel=!1}}]);