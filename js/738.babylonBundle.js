"use strict";(self.webpackChunktrans_america=self.webpackChunktrans_america||[]).push([[738],{1738:(e,t,r)=>{r.r(t),r.d(t,{Controls:()=>c});var i=r(9529);const s=new Map([["acceleration",!1],["braking",!1],["right",!1],["left",!1],["reset",!1],["stop",!1]]),a=new Map([["KeyW","acceleration"],["KeyS","braking"],["KeyA","left"],["KeyD","right"],["KeyR","reset"],["Space","stop"]]);class c{constructor(e){this.car=e,window.addEventListener("keydown",this.keydown),window.addEventListener("keyup",this.keyup)}update(){if(this.car.vehicleReady){const e=this.car.vehicle.getCurrentSpeedKmHour();let t,r,a,c;this.car.breakingForce=0,this.car.engineForce=0,s.get("reset")&&(this.car.reset(),console.log("reset "+this.car.chassisMesh.position)),s.get("acceleration")?e<-1?this.car.breakingForce=this.car.maxBreakingForce:this.car.engineForce=this.car.maxEngineForce:s.get("braking")?e>1?this.car.breakingForce=this.car.maxBreakingForce:this.car.engineForce=-this.car.maxEngineForce:s.get("stop")&&(e>1?this.car.breakingForce=2*this.car.maxBreakingForce:e<-1&&(this.car.engineForce=2*this.car.maxEngineForce)),s.get("right")?this.car.vehicleSteering<this.car.steeringClamp&&(this.car.vehicleSteering+=this.car.steeringIncrement):s.get("left")?this.car.vehicleSteering>-this.car.steeringClamp&&(this.car.vehicleSteering-=this.car.steeringIncrement):this.car.vehicleSteering=0,this.car.vehicle.applyEngineForce(this.car.engineForce,this.car.FRONT_LEFT),this.car.vehicle.applyEngineForce(this.car.engineForce,this.car.FRONT_RIGHT),this.car.vehicle.setBrake(this.car.breakingForce/2,this.car.FRONT_LEFT),this.car.vehicle.setBrake(this.car.breakingForce/2,this.car.FRONT_RIGHT),this.car.vehicle.setBrake(this.car.breakingForce,this.car.BACK_LEFT),this.car.vehicle.setBrake(this.car.breakingForce,this.car.BACK_RIGHT),this.car.vehicle.setSteeringValue(this.car.vehicleSteering,this.car.FRONT_LEFT),this.car.vehicle.setSteeringValue(this.car.vehicleSteering,this.car.FRONT_RIGHT);const h=this.car.vehicle.getNumWheels();for(c=0;c<h;c++)this.car.vehicle.updateWheelTransform(c,!0),t=this.car.vehicle.getWheelTransformWS(c),r=t.getOrigin(),a=t.getRotation(),this.car.wheelMeshes[c].position.set(r.x(),r.y(),r.z()),this.car.wheelMeshes[c].rotationQuaternion?.set(a.x(),a.y(),a.z(),a.w()),this.car.wheelMeshes[c].rotate(i._0.Z,Math.PI/2);t=this.car.vehicle.getChassisWorldTransform(),r=t.getOrigin(),a=t.getRotation(),this.car.chassisMesh.position.set(r.x(),r.y(),r.z()),this.car.chassisMesh.rotationQuaternion?.set(a.x(),a.y(),a.z(),a.w()),this.car.chassisMesh.rotate(i._0.X,Math.PI)}}keyup(e){a.get(e.code)&&s.set(a.get(e.code)??"",!1)}keydown(e){a.get(e.code)&&s.set(a.get(e.code)??"",!0)}}}}]);
//# sourceMappingURL=738.babylonBundle.js.map